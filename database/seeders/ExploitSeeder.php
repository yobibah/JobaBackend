<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Exploit;
use App\Models\Exploits;
use App\Models\User;
use App\Models\Prestataire;

class ExploitSeeder extends Seeder
{
    public function run()
    {
        $users = User::all();
        $prestataires = Prestataire::all();

        foreach ($prestataires as $prestataire) {
            // Chaque prestataire a entre 1 et 5 exploits
            $nbExploits = rand(1, 5);

            for ($i = 0; $i < $nbExploits; $i++) {
                Exploits::create([
                    'users_id' => $users->random()->id,
                    'prestataire_id' => $prestataire->id,
                    'caption' => fake()->sentence(),
                    'image' => fake()->imageUrl(640, 480, 'business', true, 'exploit'),
                    'video' => fake()->boolean(40) ? fake()->url() : null, // 40% de chance d’avoir une vidéo
                ]);
            }
        }
    }
}

